<webc-container controller="ListTrialVisitsController">
  <link rel="stylesheet" href="assets/css/trials.css" />
  <div class="main-container">
    <div class="trial-header">
      <h1 class="trial-title">
        <webc-link tag="trials">Trials</webc-link>
        <span> / </span>
        <label>{{ @id }}</label>
        <span> / </span>
        <label>Visits</label>
      </h1>
    </div>
    <div class="page-content">
      <div class="container">
        <div class="w-100 d-flex flex-wrap justify-content-between align-items-center py-3 mb-5">
          <div class="ml-auto">
            <button class="btn btn-primary" data-tag="add-visits">Add Visits</button>
          </div>
        </div>

        <div class="d-flex flex-column">
          <div class="d-flex flex-row">
            <div data-if="@consents" style="display: contents">
              <div slot="true" style="display: contents">
                <ul class="nav flex-column nav-pills" data-for="@consents">
                  <li class="nav-item m-2" data-if="@selected">
                    <a slot="true" class="nav-link active" style="background-color: rgba(0, 136, 152, 0.8)"
                      >{{ @name }}</a
                    >
                    <a data-tag="select-consent" slot="false" class="nav-link" style="cursor: pointer">{{ @name }}</a>
                  </li>
                </ul>
              </div>
              <div slot="false">There are no consents.</div>
            </div>
            <div data-if="@selectedVisits" class="flex-grow-1" style="overflow: auto; max-height: 40vh">
              <div class="d-flex flex-row m-2">
                <div class="">
                  <div class="border-top font-weight-bold pr-5">Visit</div>
                  <div class="font-weight-bold pr-5">Week</div>
                  <div class="font-weight-bold pr-5">Day</div>
                  <div class="font-weight-bold border-bottom pr-5">Visit window (days)</div>
                  <div
                    class="procedures-container"
                    style="display: contents"
                    data-for="@selectedVisits.data.0.procedures"
                  >
                    <div class="pr-5">{{ @name }}</div>
                  </div>
                </div>

                <div data-for="@selectedVisits.data" style="display: contents">
                  <div>
                    <div class="px-2 border-top font-weight-bold">{{@name}}</div>
                    <div class="px-2 font-weight-bold">{{@week}}</div>
                    <div class="px-2 font-weight-bold">{{@day}}</div>
                    <div data-if="@visitWindow" style="display: contents">
                      <div class="px-2 border-bottom font-weight-bold" slot="true">
                        {{@visitWindow.windowFrom}} {{@visitWindow.windowTo}}
                      </div>
                      <div class="px-2 border-bottom font-weight-bold" slot="false">X</div>
                    </div>
                    <div class="procedures-container" style="display: contents" data-for="@procedures">
                      <div data-if="@checked" style="display: contents">
                        <div class="px-2" slot="true">X</div>
                        <div class="px-2" slot="false">&nbsp;</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</webc-container>
